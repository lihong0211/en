import{m as s,p as t,n as a,j as e,c as o,w as n,i as r,o as l,a as c,d as i,t as m,e as d,g as u,r as h,F as A,h as g,f as p}from"./index-DyFqvN3n.js";import{_ as f,r as k}from"./_plugin-vue_export-helper.By7NQzXQ.js";import{m as y}from"./marked.esm.DIeMWxby.js";import{_ as N}from"./back.Bs47CstK.js";const j=f({data:()=>({message:[],companyName:"",trustContent:"",count:20,loading:!1,marked:y}),onLoad({companyName:s}){this.companyName=s,this.getList(this.companyName)},methods:{getList(a){s({title:"搜索中...",mask:!0}),this.loading=!0,setInterval((()=>{this.count>0&&(this.count-=1)}),1e3),k({url:`report/searchLeader?enterprise=${a}`,method:"GET"}).then((s=>{this.loading=!1,t();try{const t=s.split("||").filter((s=>!!s));this.message=t.map((s=>({trust:!1,content:s.replace(/#### 主要业绩[\s\S]*$/,"").replace(/### 主要业绩[\s\S]*$/,""),origin:s})))}catch(a){console.error(a),this.loading=!1,t()}}))},handleTrust(s){this.message[s].trust=!0},handleNext(){const s=this.message.filter((s=>s.trust)).map((s=>s.origin)).join("\n");k({url:"report/trust",data:{companyName:this.companyName,trustContent:s}}).then((s=>{console.log(s),a({url:"/pages/list/list?showPending=true"})}))},handleBack(){e()}}},[["render",function(s,t,a,e,f,k){const y=g,j=r;return l(),o(j,{class:"message-page"},{default:n((()=>[c(j,{class:"custom-header"},{default:n((()=>[c(y,{class:"back-icon",src:N,onClick:k.handleBack},null,8,["onClick"]),c(j,{class:"choose-comp"},{default:n((()=>[i(" 领导班子履历-采信 ")])),_:1}),c(j,{class:"tip"},{default:n((()=>[i(" “确认无误的信息，请点击采信该内容” ")])),_:1}),c(j,{class:"next",onClick:k.handleNext},{default:n((()=>[i(" 生成报告 ")])),_:1},8,["onClick"]),f.loading?(l(),o(j,{key:0,class:"time"},{default:n((()=>[i(m(`因数据量较大，可能需要${f.count}s时间`),1)])),_:1})):d("",!0)])),_:1}),(l(!0),u(A,null,h(f.message,((s,t)=>(l(),o(j,{key:t,class:"message"},{default:n((()=>[p("div",{innerHTML:f.marked(s.content)},null,8,["innerHTML"]),c(j,{class:"trust",onClick:s=>k.handleTrust(t)},{default:n((()=>[s.trust?(l(),o(y,{key:0,class:"trust-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAZ9JREFUWEftls0rRGEUxn/nzmiSkpSdNEUmlkooRdmysLNXFmQ+igUbdy2hGYrysWNjQbKw8Z/Y2KOmJMacoxkzEmbujDFs7ru899xznuc5zznvFf75yD/XxwfgK+ArUH8FYhYBXQGyqDNHStIfR7++AOatHSd7DDIIuoYGXVLy9DcAojaJ6DrQhtgBm8Hod0vv9xVwLcgdE4gmgXbEUkjAZUPu6g9gwZrI5Ps9my9WhnkRzO8pMG9tOLoI5KQOeTH3BpCT8pZuhAytXOOKlry44hbG7AhsCHiohLk3gPhjGAvtgLYgtsxmw9W3AOLWh9kq2Fjh/S6Os1yq559zlG5BwlpR3QamgCdwllD23+d4xhpofBkF5wRoBjIgF6hMfR61cld+eQ8krAvVM6AXSINcorJOIPOMBcaBaaDjrYCcYhIjKTfV/GN4mzBuPVj2EGSgROIfMff2QDHCNYd7+kHP80vly/kZ88oBFCOjNozoHhApPKqJefUA3jbcSGHDdYJuYcFktT2vfAqqcVINsd4mrCF5JZ/6AHwFfAV8BV4BNwmLIeLyT2cAAAAASUVORK5CYII="})):d("",!0),p("p",null,m(s.trust?"已采信":"采信该内容"),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})}],["__scopeId","data-v-7c587715"]]);export{j as default};
