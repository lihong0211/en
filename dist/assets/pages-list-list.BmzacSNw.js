import{n as a,c as e,w as t,i as s,o as i,a as l,b as n,d as c,t as A,e as d,f as r,g,r as o,F as m,h}from"./index-DHEMOeTa.js";import{_ as p,r as u}from"./_plugin-vue_export-helper.By7NQzXQ.js";const b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAYCAYAAADKx8xXAAAAAXNSR0IArs4c6QAAAotJREFUOE9tlEtoU0EUhv8z6TMhdFVdmq2gm9LqTqqiSNyJpAo+KGjBpFRU2pVdKxZp1N6IC42IiA34QLRaH7Q7kSri3kWW0kClhpA29t4jc+7cySR4V/cx3/xnzv+fS3Cu2wvcnYiv3VDMZwHuAwMgYjATiABmMPEHX6mL5IL3PlUGCOoLgTv0e+FkucEYeoMAzDMt4J2Pa1kVsOdupkm52G4EEBdawPzimgdGtgW0mN1C75Cz4Mzir0Sw1T1PwFFZS2BTq14TnlOzhBqIMxa89uJ3iruoxAEG9WdNkab1BmGL5AbEZRX4TXD61fqQYi4RaIcpteUYplda+isFjuLVl+tpZpQAikPryJFEw730i7eb1XpTcepZNQtmzyLagwg1N+aw3szxvnFbzqX5qgfldNQVc8UD5GZPJJt25J5WlwAaduoy/kc5iHrDB+ZOJpet4tiT2ioB/bo6HaywUBse6bB+bnQE24uZZEWeRh9U+9EZWzX+SUhIfAsNbaaHK8XTiW3mLXCqWB+GwlLkdLjaYqJvtJcfn4nvt+BIsZYFlOceSjIQlqwzoB90HArzo/GcBY/d39DBbs9ou4k6Q7nn53oKAh5+xInujUYJQDoqSUav3XaEGX19vmdBwCN36ylAlZhoUKZNT1+YUSk2SgETykTIvBvrWhHwoNcYYlIlgFNNHdeKSJpXAvIzyxd6ywLum9tKM3RGYTLq1uhEhvGmd6Nj5P0k1QTcm/ezRGbqo/+E9UJmSmZREXmfJ2Lj9tNA3vfo/1MvwxdaIj7mvl2OSUdFcfdN/zpAkwBU5I901PyiTLFbCrTnxxX6bsFds7zT/4tbAA61/ZiYwoD+IRU8bHSqqZ8TtBmB/wDwgBftuiGjMwAAAABJRU5ErkJggg==",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUpJREFUOE+Vk89KAlEUxr9zZ8SVvsa8Qqj9o10ghqMTtRRMRUnwQVoIWu5bJQkuGmitUODGRbUqMGgh9AKFzD0xweCdKcfxri6cj9/5zj33Iyjnsj/aE8SmFFqvlk8/qbVVd1ILV7ejDjFVAUxiUmZL1s7nOogP0L62k/F4YgCiXQAzgmicFVL3YRAfwBV2b8aGRtwB0QGA15iu50pHWy+RRvBEQScCaJYLGfs/yB8HnijgZCYIJ2Uz8xiErAS4Qr8TnkNorUo+1VchoQDvTXSBCwYOAf4QREXVyXrAcGzoiyWApbCqVvrBcxE+gm0n41+JAaS7Vp6D0aoUt6ON0B2ODc3hDuTvOmcs6VTtHOqg7euMdxA1K2b6LtIaA53fFkCuUcg8R/pIwc4Sol7b5Csvw8STb8nZ803D5MaZwMcOO726tT9dl0S3/gOkZIgRmf5o4AAAAABJRU5ErkJggg==";const k=p({data:()=>({total:0,page:1,pending:[],today:[],history:[],tabs:["生成中报告","已生成报告"],activeTab:1}),onLoad({showPending:a}){this.getList(),setInterval((()=>{this.getList()}),1e4),this.activeTab=a?0:1},methods:{getList(){u({url:"report/list",method:"GET"}).then((a=>{this.pending=null==a?void 0:a.filter((a=>1===a.generate_status)).map((a=>({...a,lastTime:Math.round(5*Math.random())}))).reverse(),this.today=null==a?void 0:a.filter((a=>this.isToday(a.generate_time)&&1!==a.generate_status)).map((a=>({...a,time:this.formatDate(a.generate_time)}))).reverse(),this.history=null==a?void 0:a.filter((a=>!this.isToday(a.generate_time)&&a.generate_status>1)).map((a=>({...a,time:this.formatDate(a.generate_time)}))).reverse()}))},isToday(a){const e=new Date(a),t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},formatDate:a=>new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-"),handleClickTab(a){this.activeTab=a},handleAdd(){a({url:"/pages/add/add"})},handleDetail({id:e,generate_status:t,generate_time_str:s,company_name:i}){3===t&&a({url:`/pages/detail/detail?id=${e}&generate_time_str=${s}&enterprise=${i}`})}}},[["render",function(a,p,u,k,y,f){const v=h,B=s;return i(),e(B,{class:"list"},{default:t((()=>[l(B,{class:"custom-header"},{default:t((()=>[l(v,{class:"header",src:"/assets/header-Bzvygjjg.png",mode:"aspectFill"}),l(v,{class:"slogan",src:"/assets/slogan-new-uZY_WKOO.jpg",mode:"aspectFill"})])),_:1}),l(B,{class:"content"},{default:t((()=>[l(B,{class:"tab"},{default:t((()=>[l(B,{class:n(`tab-item ${0===y.activeTab&&"tab-item-active"}`),onClick:p[0]||(p[0]=a=>f.handleClickTab(0))},{default:t((()=>[c("生成中报告"+A(y.pending.length?`  (${y.pending.length})`:"")+" ",1),0===y.activeTab?(i(),e(B,{key:0,class:"line"})):d("",!0)])),_:1},8,["class"]),l(B,{class:n(`tab-item ${1===y.activeTab&&"tab-item-active"}`),onClick:p[1]||(p[1]=a=>f.handleClickTab(1))},{default:t((()=>[c("已生成报告 "),1===y.activeTab?(i(),e(B,{key:0,class:"line"})):d("",!0)])),_:1},8,["class"])])),_:1}),l(B,{class:"report-list"},{default:t((()=>[l(B,{class:"add",onClick:f.handleAdd},{default:t((()=>[l(B,{class:"add-icon-wrapper"},{default:t((()=>[l(v,{class:"add-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAORJREFUOE/tlL1qAlEQhb9z3cVgEXwWIb229rFKmyagbquVna2YV0hl+pQhfcC8ilgosj+ju7ERXHdhCxG89bkfM3Nmjih6gTWx+Bnkk7gP3rW+9EVFPAZhB7kFYCjpMfN/KgKjLlIKBLMec+/rDjyZQAlTrj7Dvj1Si1okapx3T0+I0b/LTMF+z+tsi/P+xDB+OwgmQA4QD6gfITsgylmbLdhYDKNX0BR4yBGWBW5wTER6WmQt5wBLtuxsQ+wtb8HlonQYXH0Pb7/CIGxjWcC6Y8B+V8vD9DRd8gIWotonM60uAfdr54S2s3W/6QAAAABJRU5ErkJggg=="})])),_:1}),r("p",{class:"add-text"},"新建")])),_:1},8,["onClick"]),0===y.activeTab&&y.pending.length?(i(),e(B,{key:0,class:"title"},{default:t((()=>[l(v,{class:"title-img",src:b}),r("span",{class:"title-text"},"生成中报告")])),_:1})):d("",!0),0===y.activeTab?(i(!0),g(m,{key:1},o(y.pending,((a,s)=>(i(),e(B,{key:s,class:"report-item"},{default:t((()=>[r("p",{class:"name"},A(a.company_name),1),r("p",{class:"lastTime gray"},[c(" 预计"),r("span",{class:"minute"},A(a.lastTime),1),c("分钟 ")])])),_:2},1024)))),128)):d("",!0),1===y.activeTab&&y.today.length?(i(),e(B,{key:2,class:"title"},{default:t((()=>[l(v,{class:"title-img",src:b}),r("span",{class:"title-text"},"今日报告")])),_:1})):d("",!0),1===y.activeTab?(i(!0),g(m,{key:3},o(y.today,((a,s)=>(i(),e(B,{onClick:e=>f.handleDetail(a),key:s,class:"report-item"},{default:t((()=>[r("p",{class:"name"},A(a.company_name||"报告异常"),1),r("p",{class:"gray time"}," 生成时间："+A(a.generate_time_str||a.time),1),3===a.generate_status?(i(),e(B,{key:0,class:"detail"},{default:t((()=>[c("详情"),l(v,{class:"right",src:T})])),_:1})):d("",!0),2===a.generate_status?(i(),e(B,{key:1,class:"detail"},{default:t((()=>[c("异常")])),_:1})):d("",!0)])),_:2},1032,["onClick"])))),128)):d("",!0),1===y.activeTab&&y.history.length?(i(),e(B,{key:4,class:"title"},{default:t((()=>[l(v,{class:"title-img",src:b}),r("span",{class:"title-text"},"历史报告")])),_:1})):d("",!0),1===y.activeTab?(i(!0),g(m,{key:5},o(y.history,((a,s)=>(i(),e(B,{onClick:e=>f.handleDetail(a),key:s,class:"report-item"},{default:t((()=>[r("p",{class:"name"},A(a.company_name),1),r("p",{class:"gray time"}," 生成时间："+A(a.generate_time_str||a.time),1),l(B,{class:"detail"},{default:t((()=>[c("详情"),l(v,{class:"right",src:T})])),_:1})])),_:2},1032,["onClick"])))),128)):d("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-af046254"]]);export{k as default};
